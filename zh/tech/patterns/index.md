# 面向前段开发者的 AI 工程模式

作为前端工程师，我们习惯了 *Container/Presenter*、*Hooks* 或 *MVC* 等设计模式。AI 工程也有自己的一套模式，作为智能应用程序的构建模块。

## 4 个核心模式

### 1. 提示词链 (顺序处理)
**类比:** 就像 JavaScript 中的 Promise 链 (`.then().then()`)。
**是什么:** 将复杂的任务分解为一系列更小、更简单的提示词。
**何时使用:**
- 复杂的转换 (例如 "提取数据" -> "格式化为 JSON" -> "翻译")。
- 通过逐步验证确保可靠性。
- **示例:** 一个 "代码审查器"，首先总结更改，然后检查错误，最后建议改进。

### 2. RAG (检索增强生成)
**类比:** 用户在回答问题之前搜索数据库。
**是什么:** 检索相关数据（来自文档、数据库、API）并将其注入到 LLM 的上下文窗口中，然后再要求其生成答案。
**何时使用:**
- 回答有关私有/专有数据的问题。
- 绕过 LLM 的知识截止日期。
- 通过将模型建立在事实基础上来减少幻觉。
- **示例:** 客户支持机器人，内部知识库搜索。

### 3. 结构化输出 (类型安全 AI)
**类比:** API 响应的 TypeScript 接口。
**是什么:** 强制 LLM 返回符合模式 (例如 Zod) 的严格格式化数据 (通常是 JSON)。
**何时使用:**
- 将 AI 与现有软件集成 (函数参数, UI props)。
- 数据提取 (例如，解析简历、收据)。
- **示例:** 一个 "收据扫描仪"，输出 `{ total: number, date: string, items: [] }` 而不是自由文本。

### 4. 智能体与工具 (自主执行)
**类比:** 可以调用 API 函数的后台工作者或状态机。
**是什么:** 赋予 LLM 访问 "工具" (函数) 的权限，并允许它决定*哪个*工具被调用以及*何时*调用以解决问题。
**何时使用:**
- 需要外部操作的多步任务 (例如 "预订航班")。
- 路径非线性的工作流。
- **示例:** 一个 "个人助理"，可以检查你的日历、发送邮件并查询天气 API。

## "可靠 AI" 设计原则

构建生产级 AI 是关于管理不确定性。

1.  **类型安全优先:** 永远不要信任原始文本。始终根据模式 (Zod) 验证 AI 输出。
2.  **优雅失败:** AI *会*失败。实施重试逻辑和回退 UI (例如 "我无法生成那个，重试一下？")。
3.  **评估与迭代:** 你无法修复你无法衡量的东西。使用 "Evals" (AI 的单元测试) 来跟踪质量。
4.  **人机回环:** 对于关键操作，在执行前始终询问用户确认。

## 前端 AI 技术栈

| 层 | 技术 | 目的 |
| :--- | :--- | :--- |
| **UI / 框架** | **Next.js / React** | 用户交互的界面。 |
| **编排** | **Vercel AI SDK** / LangChain | 管理 UI 和 LLM 之间的数据流。 |
| **模型 (大脑)** | **OpenAI / Anthropic** | 智能引擎。 |
| **上下文 (记忆)** | **Pinecone / pgvector** | RAG 的长期记忆。 |
| **模式 (安全)** | **Zod** | 确保数据完整性。 |

## 下一步
- **学习类型安全 AI:** [结构化输出指南](/tech/structured-output) (即将推出)
- **构建 RAG 应用:** [RAG 教程](/examples/rag-chatbot)
- **探索智能体:** [MCP 指南](/zh/integration/protocols/mcp)