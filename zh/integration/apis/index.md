# API 集成指南

**先决知识**: [LLM 基础](../../tech/fundamentals/LLM.md)

## 概览

将 AI 集成到你的应用程序始于选择合适的模型提供商。虽然有几十种选择，但目前 95% 的生产级应用都建立在三大核心提供商之上：**OpenAI**、**Anthropic** 和 **Google**。

本节将指导你如何将这些强大的模型连接到你的前端应用程序。

## 提供商对比矩阵

| 特性 | OpenAI (GPT-4o) | Anthropic (Claude 3.5 Sonnet) | Google (Gemini 1.5 Pro) |
| :--- | :--- | :--- | :--- |
| **最适合** | 通用、函数调用、结构化数据 | 编码、推理、创意写作 | 长上下文 (2M tokens)、多模态 (视频) |
| **速度** | ⚡️⚡️⚡️⚡️ (快) | ⚡️⚡️⚡️ (中) | ⚡️⚡️⚡️ (中) |
| **成本** | 💰💰 (中) | 💰💰 (中) | 💰 (低) |
| **上下文窗口** | 128k Tokens | 200k Tokens | 2M Tokens |
| **工具使用** | 优秀 | 优秀 | 良好 |
| **生态系统** | 庞大 (Assistants API, Realtime API) | 强 (Artifacts, Computer Use) | 增长中 (Google 深度集成) |

---

## 决策树：我该使用哪个 API？

```mermaid
graph TD
    A[开始] --> B{需要分析视频或<br>海量文档？}
    B -- 是 --> C[Google Gemini 1.5 Pro]
    B -- 否 --> D{复杂的编码或<br>细致的写作？}
    D -- 是 --> E[Anthropic Claude 3.5 Sonnet]
    D -- 否 --> F{需要结构化 JSON <br>或强大的工具？}
    F -- 是 --> G[OpenAI GPT-4o]
    F -- 否 --> H[OpenAI GPT-4o-mini <br>(最便宜/最快)]
```

---

## 成本对比 (估算)

价格为每 100 万 Token (约 75 万个单词) 的价格。
*价格可能会变动。最后更新：2026 年 1 月。*

| 模型 | 输入成本 | 输出成本 | 约 1000 次请求的总成本 |
| :--- | :--- | :--- | :--- |
| **GPT-4o** | $2.50 | $10.00 | ~$5.00 |
| **Claude 3.5 Sonnet** | $3.00 | $15.00 | ~$6.00 |
| **Gemini 1.5 Pro** | $1.25 | $5.00 | ~$2.50 |
| **GPT-4o-mini** | $0.15 | $0.60 | ~$0.30 |

> **结论**: 对于简单任务（摘要、简单聊天），使用 **GPT-4o-mini**。它比旗舰模型便宜 20 倍。

---

## 详细集成指南

准备好写代码了吗？请遵循这些具体指南：

- [**OpenAI 指南**](./openai.md): 行业标准。涵盖设置、流式传输和工具调用。
- [**Anthropic 指南**](./anthropic.md): 最适合“聪明”的任务。涵盖 Anthropic SDK。
- [**HuggingFace 指南**](./huggingface.md): 用于开源模型和免费推理 API。

---

## 速率限制与配额

当你进入生产环境时，你会遇到限制。

**常见限制**:
1.  **RPM (每分钟请求数)**: 你可以进行多少次 API 调用。
2.  **TPM (每分钟 Token 数)**: 你可以发送/接收多少文本。

**处理限制**:
- **指数退避**: 如果你收到 `429 Too Many Requests`，等待 1 秒，然后 2 秒，然后 4 秒...
- **层级升级**: 大多数提供商会在你花费更多时增加限制（例如，OpenAI 使用层级）。
- **负载均衡**: 高级用户轮换密钥或提供商。

---

## 下一步

1.  从你选择的提供商处**获取 API Key**。
2.  **安装 SDK** (`npm install openai` 或 `npm install @anthropic-ai/sdk`)。
3.  遵循我们的 [OpenAI 指南](./openai.md) **进行第一次调用**。
