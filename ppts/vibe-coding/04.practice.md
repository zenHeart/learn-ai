---
layout: section
---

# 4. 实战演练

---

<img src="/sdlc-vs-adlc.png" class="w-full h-full object-contain" />

---

# 实战场景 1：新项目冷启动 (Design & Plan)

Demo: npm run demo:4.1

**核心挑战**：从 0 到 1 搭建整个应用框架，以往需要大量编写 Boilerplate，配置脚手架和寻找依赖模块。

**Agentic 工作流**：
1. **意图定义 (Express Intent)**：准备产品需求文档 (PRD) 或高保真 UI 原型图（支持截图等多模态输入）。
2. **约束限制 (Set Boundaries)**：在 Prompt 或 `.cursor/rules` 中明确指定技术栈，例如："使用 Vue3 + Vite + TailwindCSS 搭建"。
3. **架构生成 (Agent Implements)**：让 Agent 一次性创建完整的目录结构、基础组件、路由配置并安装对应依赖。
4. **人工验证 (Human Review)**：检查选型是否合理，如有偏差，通过指令修正（例如："将 Axios 请求库换成原生的 Fetch"）。

> 💡 **最佳实践**：不要让 Agent 自己瞎猜架构，人类负责**给边界、给框架**，Agent 负责**落地填肉**。

---

# 实战场景 2：验证驱动开发 (VDD) - 已有项目

Demo: npm run demo:4.2

传统的开发模式往往是写完一堆业务代码后再写测试。在 Vibe Coding 时代，**测试是最强力的 Prompt**。由于 Agent 能够不知疲倦地重构，VDD（Verification-Driven Development）成为最高效的范式。

**核心流程**：

<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 20px;">
  <div class="bg-blue-50/50 p-4 border border-blue-200 rounded-lg text-center shadow-sm">
    <div class="font-bold text-blue-700 mb-2">1. 编写测试 (Red)</div>
    <div class="text-xs text-slate-600">人类编写 <code>test.spec.ts</code> 定义需求细节与边界条件。</div>
  </div>
  <div class="bg-red-50/50 p-4 border border-red-200 rounded-lg text-center shadow-sm">
    <div class="font-bold text-red-700 mb-2">2. 运行失败</div>
    <div class="text-xs text-slate-600">运行测试，捕获真实的失败信息与调用栈。</div>
  </div>
  <div class="bg-yellow-50/50 p-4 border border-yellow-200 rounded-lg text-center shadow-sm">
    <div class="font-bold text-yellow-700 mb-2">3. 赋能 Agent</div>
    <div class="text-xs text-slate-600">连带终端 Log 选中报错代码, 快捷键要求 "修复此 Bug"。</div>
  </div>
  <div class="bg-green-50/50 p-4 border border-green-200 rounded-lg text-center shadow-sm">
    <div class="font-bold text-green-700 mb-2">4. 测试通过 (Green)</div>
    <div class="text-xs text-slate-600">Agent 根据真实反馈自动迭代，直到命令行变绿。</div>
  </div>
</div>

<br/>

> 📝 **案例**：需要为一个复杂的 `throttle` 添加 `trailing` 参数。只需更新测试用例，由 Agent 去完成上百行的边界判断，工程师只需审核最终生成的实现逻辑。

<div class="mt-4 mb-2 flex justify-center gap-3">
  <a href="cursor://file/Users/zenheart/code/github/learn-ai/ppts/vibe-coding/examples/4.2-vdd/throttle.ts" class="text-sm bg-slate-100 text-slate-800 border border-slate-300 px-4 py-2 rounded-lg inline-flex items-center gap-2 hover:bg-slate-200 transition shadow-sm">
    <img src="/cursor.svg" class="w-4 h-4" /> 1. 打开 4.2 源码
  </a>
  <a href="cursor://anysphere.cursor-deeplink/prompt?text=修复%204.2-vdd%2Fthrottle.ts%20里的%20bug%20以让测试通过" class="text-sm bg-slate-800 text-white px-4 py-2 rounded-lg inline-flex items-center gap-2 hover:bg-slate-700 transition shadow-sm">
    <img src="/cursor.svg" class="w-4 h-4" /> 2. 注入修复 Prompt
  </a>
</div>

---

# 实战场景 3：疑难 Bug 定位与修复

Demo: npm run demo:4.3

在复杂的企业级项目中，仅靠报错日志并不一定能立刻找到 Root Cause。现在，利用 **MCP (模型上下文协议) + 工具级 Agent 组合**，让模型成为首席排障专家。

**SOP (标准作业程序)**:

1. **对接数据源**：开启服务端日志 MCP (如 Sentry) 或是直连本地数据库。
2. **跨域追查**：
   - 💬 *Prompt: "线上端点 /api/v1/users 出现 500 报错，请分析日志，找出原因并定位到具体代码行。"*
   - 🤖 *Agent Action*: 自动调用终端执行 `grep` 检索代码 -> 分析最近 Git Commit -> 分析数据库 Schema。
3. **出具处方**：Agent 给出详细的原因报告，并直接给出能在本地复现该 bug 的修复代码的 Diff，乃至补充一条回归测试用例。
4. **人工验收**：Review 修复代码及测试报告，确认无副作用后安全合并。

<div class="mt-5 mb-2 flex justify-center gap-3">
  <a href="cursor://file/Users/zenheart/code/github/learn-ai/ppts/vibe-coding/examples/4.3-bug-fix" class="text-sm bg-slate-100 text-slate-800 border border-slate-300 px-4 py-2 rounded-lg inline-flex items-center gap-2 hover:bg-slate-200 transition shadow-sm">
    <img src="/cursor.svg" class="w-4 h-4" /> 1. 打开 4.3 故障目录
  </a>
  <a href="cursor://anysphere.cursor-deeplink/prompt?text=看了下终端的报错，帮忙查一下原因并给出修复" class="text-sm bg-slate-800 text-white px-4 py-2 rounded-lg inline-flex items-center gap-2 hover:bg-slate-700 transition shadow-sm">
    <img src="/cursor.svg" class="w-4 h-4" /> 2. 注入诊断 Prompt
  </a>
</div>

---

# Vibe Coding 最佳实战秘诀

<div class="grid grid-cols-2 gap-6 mt-8">

<div class="p-5 rounded-xl bg-slate-50 border border-slate-200 shadow-sm relative overflow-hidden">
  <div class="absolute top-0 left-0 w-2 h-full bg-blue-500"></div>
  <h3 class="mb-2 flex items-center gap-2"><div class="w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold text-sm">1</div> Context Engineering 大于 Prompt</h3>
  <p class="text-[13px] text-slate-600 leading-relaxed">Prompt 技巧再高超，如果 AI 没有拿到业务级、架构级的真实语境也是白搭。<br/><br/>构建 <strong>AGENTS.md</strong> 或 <strong>.cursor/rules</strong>，挂载 <strong>MCP 数据源</strong>，做好上下文工程，才是团队规模化使用工具的底座。</p>
</div>

<div class="p-5 rounded-xl bg-slate-50 border border-slate-200 shadow-sm relative overflow-hidden">
  <div class="absolute top-0 left-0 w-2 h-full bg-purple-500"></div>
  <h3 class="mb-2 flex items-center gap-2"><div class="w-6 h-6 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center font-bold text-sm">2</div> Delegate vs Own 明确职责</h3>
  <p class="text-[13px] text-slate-600 leading-relaxed"><strong>代理 (Delegate) 非核心工作</strong>：写模板代码、补齐测试用例、格式转换、自动生成文档。<br/><br/><strong>拥有 (Own) 核心决策</strong>：系统拆分、核心架构演进、业务校验逻辑，以及每一行发布到生产环境的最终 Merge 权。</p>
</div>

</div>

<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 30px; font-weight: bold;">
<div style="text-align: center; padding: 15px; background: #667eea; border-radius: 8px; color: white; width: 22%;">
1. 简述任务意图<br/><small class="font-normal opacity-80">1-2 min</small>
</div>
<span class="text-slate-400">→</span>
<div style="text-align: center; padding: 15px; background: #11998e; border-radius: 8px; color: white; width: 22%;">
2. 提供约束与标准<br/><small class="font-normal opacity-80">5-10 min</small>
</div>
<span class="text-slate-400">→</span>
<div style="text-align: center; padding: 15px; background: #fc5c7d; border-radius: 8px; color: white; width: 22%;">
3. Agent 循环执行<br/><small class="font-normal opacity-80">秒/分级响应</small>
</div>
<span class="text-slate-400">→</span>
<div style="text-align: center; padding: 15px; background: #f093fb; border-radius: 8px; color: white; width: 22%;">
4. 人工评审兜底<br/><small class="font-normal opacity-80">2-3 min</small>
</div>
</div>
---

# ✨ 最佳实践总结

<div class="grid grid-cols-2 gap-4 mt-8">

<div class="p-5 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm">
  <h3 class="flex items-center gap-2 text-lg font-bold mb-3 text-slate-800 dark:text-slate-200">📚 SOP (标准作业程序)</h3>
  <ul class="space-y-1.5 text-sm text-slate-600 dark:text-slate-400 list-decimal pl-5">
    <li><strong>意图 (Define)</strong>: 明确输入与格式要求</li>
    <li><strong>语境 (Context)</strong>: 挂载核心业务与项目架构</li>
    <li><strong>生成 (Generate)</strong>: 交由 AI 闭环执行</li>
    <li><strong>验证 (Verify)</strong>: 运行测试并基于反馈微调</li>
  </ul>
</div>

<div class="p-5 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm">
  <h3 class="flex items-center gap-2 text-lg font-bold mb-3 text-slate-800 dark:text-slate-200">🔍 AI 代码审查卡点</h3>
  <ul class="space-y-2 text-sm text-slate-600 dark:text-slate-400 mt-2">
    <li class="flex items-start gap-2.5"><div class="w-4 h-4 mt-0.5 border border-slate-300 dark:border-slate-600 rounded flex-shrink-0"></div> 确保携带边界测试用例完成验证闭环</li>
    <li class="flex items-start gap-2.5"><div class="w-4 h-4 mt-0.5 border border-slate-300 dark:border-slate-600 rounded flex-shrink-0"></div> 警惕低效算法与时间复杂度激增导致 OOM</li>
    <li class="flex items-start gap-2.5"><div class="w-4 h-4 mt-0.5 border border-slate-300 dark:border-slate-600 rounded flex-shrink-0"></div> 强依赖审查 (安全越权与敏感数据外泄)</li>
  </ul>
</div>

<div class="p-5 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm">
  <h3 class="flex items-center gap-2 text-lg font-bold mb-3 text-slate-800 dark:text-slate-200">📊 组织与持续改进</h3>
  <ul class="space-y-1.5 text-sm text-slate-600 dark:text-slate-400 list-disc pl-5">
    <li>将个人的高效 Prompt 沉淀为团队标准规约</li>
    <li>复盘项目中的模型"幻觉"模式并提供抓手纠偏</li>
    <li>持续向 <code>AGENTS.md</code> 中补充项目架构演进决策</li>
  </ul>
</div>

<div class="p-5 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm">
  <h3 class="flex items-center gap-2 text-lg font-bold mb-3 text-slate-800 dark:text-slate-200">🛠️ 安全基建与基底</h3>
  <ul class="space-y-1.5 text-sm text-slate-600 dark:text-slate-400 list-disc pl-5">
    <li>应用 <code>.cursorignore</code> 配置实现业务隔离与合规</li>
    <li>开启官方商业隐私保护策略切断代码训练后路</li>
    <li>利用团队配额共享解决 API 调用速率限制瓶颈</li>
  </ul>
</div>

</div>

---

# 附件


- 📁 团队知识库 - 高效 Prompt 集合
- 📋 内部 AI 工具使用指南
- [GitHub Copilot 文档](https://docs.github.com/copilot)
- [VS Code Copilot 指南](https://code.visualstudio.com/docs/copilot)
- [Claude CLI 文档](https://code.claude.com/docs)
- [Gemini CLI 文档](https://geminicli.com/docs)

