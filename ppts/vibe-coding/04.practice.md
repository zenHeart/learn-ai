### 4. 实战

<img src="/sdlc-vs-adlc.png" class="w-full h-full object-contain" />

---
layout: full-vibe
class: p-0
clicks: 9
---

<PairWorkflow />

---


# 实战场景 1：新项目冷启动 (Design & Plan)

<VibeExample id="4.1" />

**核心挑战**：从 0 到 1 搭建整个应用框架，以往需要大量编写 Boilerplate，配置脚手架和寻找依赖模块。

**Agentic 工作流**：
1. **意图定义 (Express Intent)**：准备产品需求文档 (PRD) 或高保真 UI 原型图（支持截图等多模态输入）。
2. **约束限制 (Set Boundaries)**：在 Prompt 或 `.cursor/rules` 中明确指定技术栈，例如："使用 Vue3 + Vite + TailwindCSS 搭建"。
3. **架构生成 (Agent Implements)**：让 Agent 一次性创建完整的目录结构、基础组件、路由配置并安装对应依赖。
4. **人工验证 (Human Review)**：检查选型是否合理，如有偏差，通过指令修正（例如："将 Axios 请求库换成原生的 Fetch"）。

> 💡 **最佳实践**：不要让 Agent 自己瞎猜架构，人类负责**给边界、给框架**，Agent 负责**落地填肉**。

---

# 实战场景 2：验证驱动开发 (VDD) - 已有项目

传统的开发模式往往是写完一堆业务代码后再写测试。在 Vibe Coding 时代，**测试是最强力的 Prompt**。由于 Agent 能够不知疲倦地重构，VDD（Verification-Driven Development）成为最高效的范式。

**核心流程**：

<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 20px;">
  <div class="bg-blue-50/50 p-4 border border-blue-200 rounded-lg text-center shadow-sm">
    <div class="font-bold text-blue-700 mb-2">1. 编写测试 (Red)</div>
    <div class="text-xs text-slate-600">人类编写 <code>test.spec.ts</code> 定义需求细节与边界条件。</div>
  </div>
  <div class="bg-red-50/50 p-4 border border-red-200 rounded-lg text-center shadow-sm">
    <div class="font-bold text-red-700 mb-2">2. 运行失败</div>
    <div class="text-xs text-slate-600">运行测试，捕获真实的失败信息与调用栈。</div>
  </div>
  <div class="bg-yellow-50/50 p-4 border border-yellow-200 rounded-lg text-center shadow-sm">
    <div class="font-bold text-yellow-700 mb-2">3. 赋能 Agent</div>
    <div class="text-xs text-slate-600">连带终端 Log 选中报错代码, 快捷键要求 "修复此 Bug"。</div>
  </div>
  <div class="bg-green-50/50 p-4 border border-green-200 rounded-lg text-center shadow-sm">
    <div class="font-bold text-green-700 mb-2">4. 测试通过 (Green)</div>
    <div class="text-xs text-slate-600">Agent 根据真实反馈自动迭代，直到命令行变绿。</div>
  </div>
</div>

<br/>

> 📝 **案例**：需要为一个复杂的 `throttle` 添加 `trailing` 参数。只需更新测试用例，由 Agent 去完成上百行的边界判断，工程师只需审核最终生成的实现逻辑。

<VibeExample id="4.2" class="mt-4" />

---

# 实战场景 3：疑难 Bug 定位与修复

在复杂的企业级项目中，仅靠报错日志并不一定能立刻找到 Root Cause。现在，利用 **MCP (模型上下文协议) + 工具级 Agent 组合**，让模型成为首席排障专家。

**SOP (标准作业程序)**:

1. **对接数据源**：开启服务端日志 MCP (如 Sentry) 或是直连本地数据库。
2. **跨域追查**：
   - 💬 *Prompt: "线上端点 /api/v1/users 出现 500 报错，请分析日志，找出原因并定位到具体代码行。"*
   - 🤖 *Agent Action*: 自动调用终端执行 `grep` 检索代码 -> 分析最近 Git Commit -> 分析数据库 Schema。
3. **出具处方**：Agent 给出详细的原因报告，并直接给出能在本地复现该 bug 的修复代码的 Diff，乃至补充一条回归测试用例。
4. **人工验收**：Review 修复代码及测试报告，确认无副作用后安全合并。

<VibeExample id="4.3" class="mt-5" />

---

<div class="grid grid-cols-2 gap-4 mt-8">

<div class="p-2 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm">

📚 PAIR 工作流 SOP

1. **Plan (计划)** 明确需求，制定详细计划
2. **Assess (评估)** 进入 Plan Mode
3. **Implementation (实施)** 标准化执行，Agent Loop
4. **Review (评审)** 人工评审兜底，边界/性能/安全审查

</div>

<div class="p-2 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm">

🔄 双微循环机制

- **理解对齐循环** (Plan ↔ Assess): 迭代直到 AI 完全理解
- **Checkpoint 验证循环** (Implementation ↔ Review): 每个小步骤后的验证
- **回退路径**: 理解偏差 → Plan / 需精细化 → Plan

</div>

<div class="p-2 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm">

🔍 AI 代码审查卡点

1. **边界验证** 确保携带边界测试用例完成验证闭环
2. **性能警惕** 警惕低效算法与时间复杂度激增
3. **安全审查** 强依赖审查 (越权与敏感数据)

</div>

<div class="p-2 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm">

 📊 组织与持续改进

- 将个人高效 Prompt 沉淀为团队标准规约
- 复盘模型"幻觉"模式并提供抓手纠偏
- 持续向 `AGENTS.md` 补充架构演进决策

</div>

</div>
