# 2. 原理

- **Transformer 架构**：理解 Token 之间的关联性。
- **概率预测**：AI 不懂代码，它在预测下一个最合理的代码块。
- **涌现能力**：为什么现在的 AI 能理解复杂的逻辑？
  - 参数规模的指数级增长
  - 高质量合成与真实代码数据的训练

---

# DO NOT memorize this math
但是要理解 Context Window (上下文窗口)

- **为什么 AI 会“失忆”？**
  - Token 限制是硬约束
  - 就像人的短期记忆（工作记忆）
- **如何克服？**
  - **RAG (检索增强生成)**：只把相关文档喂给 AI
  - **@Codebase / @Files**：精准投喂上下文

> "Garbage In, Garbage Out." -> "Context In, Code Out."

---

# 从 LLM 到 Agent (智能体)

- **公式**：**Agent = LLM + 规划 + 记忆 + 工具使用**
- **思维链 (CoT)**：让 AI 在写代码前先“思考”步骤
- **闭环反馈 (Loop)**：
  1. AI 尝试运行代码
  2. 发现错误 -> 读取报错
  3. 自我修复 -> 再次运行
  4. 最终交付

---

# Prompt 工程：结构化指令

**核心公式：Context + Task + Constraint + Output**

<div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 20px;">

<div style="padding: 16px; border-radius: 8px; background: #1e1e2e; color: #cdd6f4;">

### ❌ 模糊指令
"帮我写个用户登录。"

</div>

<div style="padding: 16px; border-radius: 8px; background: #1e1e2e; color: #cdd6f4;">

### ✅ 结构化指令
**Context**: Next.js 14, Supabase Auth
**Task**: 实现用户登录页面
**Constraint**: 使用 TailwindCSS, 响应式设计
**Output**: 完整代码，包含错误处理

</div>

</div>

---

# 常用 Prompt 模板

- **修复 Bug**:
  > "背景：项目使用 Node.js + Jest，当前测试 `utils/calc.js` 失败，报错信息：<错误信息>\n上下文：相关函数如下：<粘贴函数代码>\n期望：请定位可能原因并给出修复补丁，要求提供修改后的完整函数代码与简要解释。"

- **生成测试**:
  > "说明：为下列函数生成 Jest 测试用例，覆盖正常输入、异常输入与边界条件。\n代码：<函数代码>\n输出格式：返回一个可直接复制到 `__tests__` 的代码块。"

- **代码解释**:
  > "请解释这段代码做了什么，复杂度如何，可能的风险是什么。"
