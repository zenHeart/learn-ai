# 2. Prompt 工程

## 什么是 Prompt Engineering？

> **Prompt Engineering** 是设计最优提示词来引导语言模型、帮助我们高效完成任务的实践。

<v-clicks>

* **提升输出质量**: 优化后的提示词帮助模型生成更准确、更完整的结果
* **控制模型行为**: 引导模型遵循特定指南，执行特定任务
* **降低成本**: 精确的提示词减少 Token 消耗

</v-clicks>

---

# Prompt 框架（ICIO）

| 组件 | 功能 | 必需 |
|------|------|------|
| **Instruction（指令）** | 希望模型执行的具体任务 | ✅ 必需 |
| **Context（上下文）** | 引导模型响应的额外信息 | 可选 |
| **Input Data（输入数据）** | 模型需要处理的内容 | 可选 |
| **Output Indicator（输出指示）** | 模型应该输出的类型或格式 | 可选 |

---

# 核心技巧 1：Zero-shot

## 零样本提示

只包含指令，不给任何示例

```
请将以下句子分类为积极或消极：
"这个产品太差了"
```

<v-click>

**适用场景**: 简单任务，模型本身能力强

</v-click>

---

# 核心技巧 2：Few-shot

## 少样本提示

包含示例，帮助模型学习响应模式

```
将以下句子分类为积极或消极：

示例：
"太棒了！" -> 积极
"很差劲" -> 消极

"服务态度很好" ->
```

<v-click>

**关键**: 示例质量决定输出质量（Garbage In, Garbage Out）

</v-click>

---

# 核心技巧 3：Chain-of-Thought (CoT)

## 思维链提示

通过推理步骤帮助模型完成复杂任务

```
问题：小明有 5 个苹果，小红给了他 3 个，小明吃掉了 2 个，还剩多少个？

让我们一步步思考：
1. 小明最初有 5 个苹果
2. 小红给了 3 个，现在有 5 + 3 = 8 个
3. 小明吃掉了 2 个，还剩 8 - 2 = 6 个
答案是：6 个
```

<v-click>

**关键**: 加入 "让我们一步步思考" 触发模型推理

</v-click>

---

# 核心技巧 4：角色设定

## Role Prompting

为模型设定特定角色，提升专业性

```
你是一位资深软件工程师，拥有 10 年以上经验。
擅长 JavaScript、TypeScript、React 等前端技术。
请审查以下代码并提出改进建议：

// 代码...
```

<v-clicks>

**效果**: 模型会采用该角色的专业视角和表达方式

</v-clicks>

---

# 核心技巧 5：格式控制

## Output Formatting

明确指定输出格式，减少后处理工作

```
请提取以下文本中的人名和职位：

张三 - 首席执行官
李四 - 技术总监

输出格式为 JSON：
{
  "people": [
    {"name": "姓名", "title": "职位"}
  ]
}

文本：王五担任产品经理，赵六是设计师
```

---

# 结构化 Prompt 格式

## XML 格式（Anthropic 推荐）

```xml
<system_instructions>
你是一位资深的代码审查专家，擅长发现安全漏洞和性能问题。
请以专业的技术视角审查代码。
</system_instructions>

<context>
项目背景：本项目是一个金融交易系统
审查范围：主要关注安全性和性能
</context>

<task>
审查以下代码片段，找出潜在问题：
</task>

<code_to_review>
function transfer(from, to, amount) {
  // 转账逻辑
}
</code_to_review>

<output_format>
请按以下 JSON 格式输出：
{
  "issues": [{"severity": "high|medium|low", "description": "...", "line": N}],
  "summary": "总体评估"
}
</output_format>
```

<v-click>

## Markdown 格式（OpenAI 推荐）

```markdown
## 角色
你是一位资深软件架构师，擅长微服务设计和分布式系统。

## 任务
审查以下系统架构设计是否合理：

## 输入
[在此描述系统架构]

## 约束条件
- 延迟要求 < 100ms
- 可用性 > 99.9%
- 支持水平扩展

## 输出格式
请用以下结构输出：
1. **总体评价**: ...
2. **问题列表**: ...
3. **改进建议**: ...
```

</v-click>

<v-click>

## 结构化格式的优势

| 优势 | 说明 |
|------|------|
| **清晰分隔** | 使用 XML 标签或 Markdown 标题明确区分各部分 |
| **易于维护** | 结构化格式便于后续修改和扩展 |
| **减少歧义** | 明确的格式减少模型理解错误 |
| **便于解析** | 开发者可以更容易解析和提取关键信息 |

</v-click>

---

# 核心原则

<v-clicks>

1. **精确清晰**
   - 明确表达需求，避免模糊
   - 使用分隔符区分不同部分
   - 添加具体示例

2. **分解任务**
   - 复杂任务拆分为简单步骤
   - 逐步引导模型

3. **验证结果**
   - 模型可能出错，必须验证
   - 迭代优化提示词

4. **控制输出**
   - 指定格式（JSON、Markdown）
   - 限制输出长度
   - 设置温度参数

</v-clicks>

---
layout: center
---
# 本章小结：Prompt 工程

<v-clicks>

1. **ICIO 框架**: Instruction + Context + Input + Output
2. **核心技巧**: Zero-shot、Few-shot、CoT、角色设定
3. **最佳实践**: 精确、分解、验证、控制

</v-clicks>
