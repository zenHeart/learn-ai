# 5. Server 开发 Python

## FastMCP

```bash
pip install fastmcp
```

> FastMCP 是 Python 生态中最流行的 MCP Server 框架

---

# 基础示例

```python
from fastmcp import FastMCP

mcp = FastMCP("my-server")

@mcp.tool()
def get_weather(city: str) -> str:
    """获取指定城市的天气"""
    # 实现业务逻辑
    return f"{city} 今天天气晴朗，气温 25°C"
```

<v-click>

**简洁**: 使用装饰器定义工具

</v-click>

---

# 完整示例

```python
from fastmcp import FastMCP
from pydantic import BaseModel

mcp = FastMCP("weather-server")

class WeatherInput(BaseModel):
    city: str

@mcp.tool()
def get_weather(input: WeatherInput) -> str:
    """获取指定城市的天气信息"""
    # 业务逻辑
    return {"weather": "sunny", "temp": 25, "city": input.city}

if __name__ == "__main__":
    mcp.run()
```

---

# 高级用法

<div class="grid grid-cols-2 gap-6">

<div>

### 资源定义

```python
@mcp.resource("user://{user_id}")
def get_user(user_id: str):
    return {"id": user_id, "name": "User"}
```

</div>

<div>

### 提示词模板

```python
@mcp.prompt()
def code_review(file_path: str) -> str:
    return f"""请审查 {file_path}

关注：代码质量、bug、安全"""
```

</div>

</div>

---

# 其他 Python 框架

| 框架 | 特点 |
|------|------|
| **FastMCP** | 简洁、高性能 |
| **mcp-server** | 官方示例 |
| **mcp-any** | 通用适配器 |

<v-click>

**推荐**: FastMCP 用于生产环境

</v-click>

---
layout: center
---
# 本章小结：Python 开发

<v-clicks>

1. **安装**: `pip install fastmcp`
2. **定义工具**: `@mcp.tool()` 装饰器
3. **资源**: `@mcp.resource()` 装饰器
4. **提示词**: `@mcp.prompt()` 装饰器

</v-clicks>
