import{M,r as P,f as p,o as n,i as l,g as e,t as v,n as a,aa as g,z as S,F as L,_ as N,j as B,b as j,w as I,e as R,v as H,x as $,A as w}from"./modules/vue-CXUyuVNl.js";import{u as h,f as z}from"./slidev/context-DyC8pXm1.js";import{_ as m,j as V}from"./index-BIGdWZZn.js";import"./modules/shiki-BpgxzpLo.js";const J={key:0,class:"flex-shrink-0 flex justify-between items-center p-3 border-b border-slate-200 dark:border-slate-800 bg-slate-50/50 dark:bg-[#161b22]/50"},O={class:"flex items-center gap-2 bg-slate-100 dark:bg-[#0d1117] p-1 rounded-lg border border-slate-200 dark:border-slate-700/50"},T=["disabled"],W={class:"px-2 font-mono text-xs text-blue-600 dark:text-blue-400 font-bold min-w-[60px] text-center"},A=["disabled"],D={class:"flex-1 relative bg-white dark:bg-[#0d1117] overflow-hidden flex items-center justify-center"},F={class:"relative w-[900px] h-[350px]"},G={class:"absolute inset-0 w-full h-full pointer-events-none"},E={key:1,class:"flex-shrink-0 bg-slate-50 dark:bg-[#161b22] border-t border-slate-200 dark:border-slate-800 p-3"},X={class:"font-bold text-sm text-blue-600 dark:text-blue-400 mb-1"},Y={class:"text-slate-600 dark:text-slate-300 text-xs mb-2"},q={class:"flex flex-wrap gap-1"},K={__name:"MCPWorkflow",props:{mini:{type:Boolean,default:!1},activeStepId:{type:String,default:null}},setup(b){h();const r=b,s=P(0);let o;try{o=V()}catch{}const i=[{id:"start",title:"1. Host 发起请求",description:"Claude Code (Host) 作为客户端，发起工具调用请求",tags:["Request","Host"],activeNode:"start",line:null},{id:"tool_call",title:"2. MCP Client 接收",description:"MCP Client 接收请求，解析工具名称和参数",tags:["Parse","MCP Client"],activeNode:"mcp-client",line:"start-mcp"},{id:"stdin",title:"3. JSON-RPC 通信",description:"通过 stdin/stdout 使用 JSON-RPC 2.0 协议传输",tags:["JSON-RPC","Protocol"],activeNode:"mcp-server",line:"mcp-stdin"},{id:"execute",title:"4. Server 执行工具",description:"MCP Server 调用本地工具（如文件系统、Git）",tags:["Execute","Local"],activeNode:"mcp-server",line:"mcp-execute"},{id:"response",title:"5. 返回结果",description:"Server 执行完成后，返回结构化结果给 Client",tags:["Response","Result"],activeNode:"mcp-client",line:"execute-client"},{id:"llm",title:"6. LLM 处理结果",description:"MCP Client 将结果返回给 LLM 进行下一步推理",tags:["LLM","Reasoning"],activeNode:"llm",line:"client-llm"},{id:"done",title:"7. 完成",description:"任务完成，Host 显示最终结果给用户",tags:["Complete","UI"],activeNode:"done",line:"llm-done"}],c=S(()=>r.mini&&r.activeStepId?i.find(d=>d.id===r.activeStepId)||i[0]:i[s.value]);M(()=>o?.clicks?.value,d=>{d!==void 0&&!r.mini&&(s.value=Math.min(Math.max(d,0),i.length-1))},{immediate:!0});const k=()=>{!r.mini&&o?o.next():s.value<i.length-1&&s.value++},y=()=>{!r.mini&&o?o.prev():s.value>0&&s.value--},C=()=>{!r.mini&&o&&o.clicks?o.clicks.value=0:s.value=0},x=d=>c.value.activeNode===d?"node-active border-blue-500 bg-blue-50 dark:bg-slate-800":"opacity-50 grayscale border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",u=(d,t)=>{const f=c.value.line,_=`${d}-${t}`;return f===_?"stroke-blue-500 opacity-100 flow-line":"stroke-slate-700 opacity-30"};return(d,t)=>(n(),p("div",{class:a(["mcp-workflow-container bg-white dark:bg-[#0b0d11] text-slate-700 dark:text-slate-200 rounded-lg overflow-hidden flex flex-col h-full w-full",{"mini-mode border-none bg-transparent":b.mini}])},[l(" 顶部标题区 "),b.mini?l("v-if",!0):(n(),p("div",J,[t[3]||(t[3]=e("div",null,[e("h2",{class:"text-lg font-bold flex items-center gap-2"}," MCP 工作流 ")],-1)),e("div",O,[e("button",{onClick:y,disabled:s.value===0,class:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded disabled:opacity-30"},[...t[0]||(t[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),e("polyline",{points:"12 19 5 12 12 5"})],-1)])],8,T),e("div",W,v(s.value+1)+"/"+v(i.length),1),e("button",{onClick:k,disabled:s.value===i.length-1,class:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded disabled:opacity-30"},[...t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),e("polyline",{points:"12 5 19 12 12 19"})],-1)])],8,A),t[2]||(t[2]=e("div",{class:"w-px h-4 bg-slate-300 dark:bg-slate-700 mx-1"},null,-1)),e("button",{onClick:C,class:"px-2 py-1 text-xs hover:bg-slate-200 dark:hover:bg-slate-700 rounded"}," 重置 ")])])),l(" 可视化区域 "),e("div",D,[e("div",F,[l(" SVG 连接线 "),(n(),p("svg",G,[t[4]||(t[4]=e("defs",null,[e("marker",{id:"mcp-arrow-gray",markerWidth:"6",markerHeight:"6",refX:"16",refY:"3",orient:"auto"},[e("path",{d:"M0,0 L0,6 L6,3 z",fill:"currentColor"})]),e("marker",{id:"mcp-arrow-blue",markerWidth:"6",markerHeight:"6",refX:"16",refY:"3",orient:"auto"},[e("path",{d:"M0,0 L0,6 L6,3 z",fill:"#60a5fa"})])],-1)),e("line",{x1:"100",y1:"160",x2:"180",y2:"160","stroke-width":"2",class:a(u("start","mcp")),"marker-end":"url(#mcp-arrow-gray)"},null,2),e("line",{x1:"280",y1:"160",x2:"360",y2:"160","stroke-width":"2",class:a(u("mcp","stdin")),"marker-end":"url(#mcp-arrow-gray)"},null,2),e("line",{x1:"460",y1:"160",x2:"540",y2:"160","stroke-width":"2",class:a(u("stdin","execute")),"marker-end":"url(#mcp-arrow-gray)"},null,2),e("line",{x1:"640",y1:"160",x2:"720",y2:"160","stroke-width":"2",class:a(u("execute","response")),"marker-end":"url(#mcp-arrow-gray)"},null,2),e("line",{x1:"820",y1:"160",x2:"860",y2:"160","stroke-width":"2",class:a(u("response","llm")),"marker-end":"url(#mcp-arrow-gray)"},null,2)])),l(" Host "),e("div",{class:a(["absolute top-[110px] left-[10px] w-[90px] h-[100px]",x("start")])},[...t[5]||(t[5]=[g('<div class="w-full h-full bg-white dark:bg-[#1c2128] border border-slate-200 dark:border-slate-600 rounded-lg p-2 flex flex-col items-center justify-center gap-1 shadow-xl" data-v-2cbd4e9b><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-slate-600" data-v-2cbd4e9b><rect width="18" height="18" x="3" y="3" rx="2" data-v-2cbd4e9b></rect><path d="M3 9h18" data-v-2cbd4e9b></path><path d="M9 21V9" data-v-2cbd4e9b></path></svg><span class="font-bold text-xs" data-v-2cbd4e9b>Claude Code</span><span class="text-[9px] text-slate-500" data-v-2cbd4e9b>Host</span></div>',1)])],2),l(" MCP Client "),e("div",{class:a(["absolute top-[110px] left-[180px] w-[100px] h-[100px]",x("mcp-client")])},[...t[6]||(t[6]=[g('<div class="w-full h-full bg-white dark:bg-[#1c2128] border border-slate-200 dark:border-slate-600 rounded-lg p-2 flex flex-col items-center justify-center gap-1 shadow-xl" data-v-2cbd4e9b><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-blue-500" data-v-2cbd4e9b><path d="M12 2a10 10 0 1 0 10 10" data-v-2cbd4e9b></path><path d="M12 12l8-8" data-v-2cbd4e9b></path><circle cx="12" cy="12" r="3" data-v-2cbd4e9b></circle></svg><span class="font-bold text-xs" data-v-2cbd4e9b>MCP Client</span><span class="text-[9px] text-slate-500" data-v-2cbd4e9b>SDK</span></div>',1)])],2),l(" MCP Server "),e("div",{class:a(["absolute top-[110px] left-[360px] w-[100px] h-[100px]",x("mcp-server")])},[...t[7]||(t[7]=[g('<div class="w-full h-full bg-white dark:bg-[#1c2128] border border-slate-200 dark:border-slate-600 rounded-lg p-2 flex flex-col items-center justify-center gap-1 shadow-xl" data-v-2cbd4e9b><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-green-500" data-v-2cbd4e9b><rect width="4" height="16" x="10" y="4" rx="2" data-v-2cbd4e9b></rect><rect width="4" height="16" x="4" y="4" rx="2" data-v-2cbd4e9b></rect><rect width="4" height="16" x="16" y="4" rx="2" data-v-2cbd4e9b></rect></svg><span class="font-bold text-xs" data-v-2cbd4e9b>MCP Server</span><span class="text-[9px] text-slate-500" data-v-2cbd4e9b>Tool Provider</span></div>',1)])],2),l(" Local Tools "),e("div",{class:a(["absolute top-[110px] left-[540px] w-[100px] h-[100px]",x("execute")])},[...t[8]||(t[8]=[g('<div class="w-full h-full bg-white dark:bg-[#1c2128] border border-slate-200 dark:border-slate-600 rounded-lg p-2 flex flex-col items-center justify-center gap-1 shadow-xl" data-v-2cbd4e9b><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-purple-500" data-v-2cbd4e9b><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" data-v-2cbd4e9b></path></svg><span class="font-bold text-xs" data-v-2cbd4e9b>Local Tools</span><span class="text-[9px] text-slate-500" data-v-2cbd4e9b>FS/Git/API</span></div>',1)])],2),l(" LLM "),e("div",{class:a(["absolute top-[110px] left-[720px] w-[80px] h-[100px]",x("llm")])},[...t[9]||(t[9]=[g('<div class="w-full h-full bg-white dark:bg-[#1c2128] border border-slate-200 dark:border-slate-600 rounded-lg p-2 flex flex-col items-center justify-center gap-1 shadow-xl" data-v-2cbd4e9b><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-purple-600" data-v-2cbd4e9b><path d="M12 2a2.5 2.5 0 0 1 2.5 2.5c0 .74-.4 1.39-1 1.73v.77a2.5 2.5 0 0 1-5 0v-.77c-.6-.34-1-.99-1-1.73A2.5 2.5 0 0 1 12 2z" data-v-2cbd4e9b></path><path d="M12 8.5v3" data-v-2cbd4e9b></path><path d="M12 14.5a2.5 2.5 0 0 0 2.5 2.5c.74 0 1.39-.4 1.73-1" data-v-2cbd4e9b></path><path d="M12 14.5a2.5 2.5 0 0 1-2.5 2.5c-.74 0-1.39-.4-1.73-1" data-v-2cbd4e9b></path></svg><span class="font-bold text-xs" data-v-2cbd4e9b>LLM</span><span class="text-[9px] text-slate-500" data-v-2cbd4e9b>推理</span></div>',1)])],2),l(" Done "),e("div",{class:a(["absolute top-[120px] left-[860px] w-[30px] h-[80px]",x("done")])},[...t[10]||(t[10]=[e("div",{class:"w-full h-full bg-white dark:bg-[#1c2128] border border-slate-200 dark:border-slate-600 rounded-full p-2 flex flex-col items-center justify-center shadow-xl"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"text-green-500"},[e("polyline",{points:"20 6 9 17 4 12"})])],-1)])],2),l(" Protocol Badge "),t[11]||(t[11]=e("div",{class:"absolute top-[270px] left-[250px] bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 px-3 py-1 rounded-full text-xs font-mono text-yellow-800 dark:text-yellow-200"}," JSON-RPC 2.0 via stdin/stdout ",-1))])]),l(" 底部状态区 "),b.mini?l("v-if",!0):(n(),p("div",E,[e("h3",X,v(c.value.title),1),e("p",Y,v(c.value.description),1),e("div",q,[(n(!0),p(L,null,N(c.value.tags,f=>(n(),p("span",{key:f,class:"px-2 py-0.5 bg-slate-200 dark:bg-slate-800 rounded text-[10px] font-mono"},"#"+v(f),1))),128))])]))],2))}},U=m(K,[["__scopeId","data-v-2cbd4e9b"]]),Q={__name:"full-vibe",setup(b){return h(),(r,s)=>(n(),p("div",{class:a(["slidev-layout full-vibe h-full w-full",r.$attrs.class||"p-8"])},[B(r.$slots,"default",{},void 0,!0)],2))}},Z=m(Q,[["__scopeId","data-v-ece60380"]]),ae={__name:"01.intro.md__slidev_6",setup(b){const{$clicksContext:r,$frontmatter:s}=h();return r.setup(),(o,i)=>{const c=U;return n(),j(Z,H($(w(z)(w(s),5))),{default:I(()=>[R(c)]),_:1},16)}}};export{ae as default};
