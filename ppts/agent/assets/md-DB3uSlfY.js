import{_ as N}from"./slidev/VClick-BhRvwZWx.js";import{M as S,r as z,f as c,o as p,i as a,g as e,t as g,a4 as x,n as r,G as y,z as j,F as A,_ as I,b as V,w,e as k,v as E,x as D,A as m}from"./modules/vue-BgkpjL6v.js";import{u as _,f as H}from"./slidev/context-ipDP5ZQK.js";import{_ as P,j as R}from"./index-CLLv851V.js";import{I as $}from"./slidev/default-CfZlRYaU.js";import"./slidev/VClicks-CxGLuOfx.js";import"./modules/shiki-Cux_KVWt.js";const T={key:0,class:"flex-shrink-0 flex justify-between items-center p-3 border-b border-slate-200 dark:border-slate-800 bg-slate-50/50 dark:bg-[#161b22]/50"},W={class:"flex items-center gap-2 bg-slate-100 dark:bg-[#0d1117] p-1 rounded-lg border border-slate-200 dark:border-slate-700/50"},X=["disabled"],Y={class:"px-2 font-mono text-xs text-purple-600 dark:text-purple-400 font-bold min-w-[60px] text-center"},F=["disabled"],G={class:"flex-1 relative bg-white dark:bg-[#0d1117] overflow-hidden flex items-center justify-center"},q={class:"relative w-[850px] h-[320px]"},J={class:"absolute inset-0 w-full h-full pointer-events-none"},K={key:0,class:"absolute top-[210px] left-[750px] bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 px-3 py-1 rounded-full text-xs font-bold text-green-700 dark:text-green-400"},O={key:1,class:"absolute top-[210px] left-[350px] bg-orange-100 dark:bg-orange-900/30 border border-orange-300 dark:border-orange-700 px-3 py-1 rounded-full text-xs font-bold text-orange-700 dark:text-orange-400 animate-pulse"},Q={key:1,class:"flex-shrink-0 bg-slate-50 dark:bg-[#161b22] border-t border-slate-200 dark:border-slate-800 p-3"},U={class:"font-bold text-sm text-purple-600 dark:text-purple-400 mb-1"},Z={class:"text-slate-600 dark:text-slate-300 text-xs mb-2"},ee={class:"flex flex-wrap gap-1"},te={__name:"AgentLoop",props:{mini:{type:Boolean,default:!1},activeStepId:{type:String,default:null}},setup(f){_();const d=f,l=z(0);let o;try{o=R()}catch{}const s=[{id:"receive",title:"1. 接收任务",description:"Agent 接收用户输入的任务描述，理解任务目标",tags:["Input","Task"],activeNode:"receive",line:null},{id:"plan",title:"2. 规划分解",description:"将复杂任务分解为可执行的子任务，制定执行计划",tags:["Planning","Decompose"],activeNode:"planner",line:"receive-plan"},{id:"execute",title:"3. 执行工具",description:"根据计划选择合适的工具，生成参数并执行",tags:["Tool","Execute"],activeNode:"executor",line:"plan-execute"},{id:"evaluate",title:"4. 评估结果",description:"验证工具返回结果，检查是否达到目标",tags:["Evaluation","Check"],activeNode:"evaluator",line:"execute-evaluate"},{id:"decision",title:"5. 决策判断",description:"根据评估结果判断：成功则完成，失败则反思",tags:["Decision","Branch"],activeNode:"decision",line:"evaluate-decide"},{id:"reflect",title:"6. 反思调整",description:"分析失败原因，调整策略重新规划",tags:["Reflection","Retry"],activeNode:"reflect",line:"decide-reflect",isLoop:!0},{id:"done",title:"7. 任务完成",description:"任务成功完成，返回结果给用户",tags:["Complete","Result"],activeNode:"done",line:"decide-done"}],i=j(()=>d.mini&&d.activeStepId?s.find(n=>n.id===d.activeStepId)||s[0]:s[l.value]);S(()=>o?.clicks?.value,n=>{n!==void 0&&!d.mini&&(l.value=Math.min(Math.max(n,0),s.length-1))},{immediate:!0});const h=()=>{!d.mini&&o?o.next():l.value<s.length-1&&l.value++},L=()=>{!d.mini&&o?o.prev():l.value>0&&l.value--},C=()=>{!d.mini&&o&&o.clicks?o.clicks.value=0:l.value=0},u=n=>i.value.activeNode===n?"node-active border-purple-500 bg-purple-50 dark:bg-purple-900/20":"opacity-50 grayscale border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",v=(n,t,b=!1)=>{const B=i.value.line,M=`${n}-${t}`;return B===M?b?"stroke-orange-500 opacity-100 flow-line":"stroke-purple-500 opacity-100 flow-line":"stroke-slate-700 opacity-30"};return(n,t)=>(p(),c("div",{class:r(["agent-loop-container bg-white dark:bg-[#0b0d11] text-slate-700 dark:text-slate-200 rounded-lg overflow-hidden flex flex-col h-full w-full",{"mini-mode border-none bg-transparent":f.mini}])},[a(" 顶部标题区 "),f.mini?a("v-if",!0):(p(),c("div",T,[t[3]||(t[3]=e("div",null,[e("h2",{class:"text-lg font-bold flex items-center gap-2"}," Agent Loop 工作流 ")],-1)),e("div",W,[e("button",{onClick:L,disabled:l.value===0,class:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded disabled:opacity-30"},[...t[0]||(t[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),e("polyline",{points:"12 19 5 12 12 5"})],-1)])],8,X),e("div",Y,g(l.value+1)+"/"+g(s.length),1),e("button",{onClick:h,disabled:l.value===s.length-1,class:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded disabled:opacity-30"},[...t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),e("polyline",{points:"12 5 19 12 12 19"})],-1)])],8,F),t[2]||(t[2]=e("div",{class:"w-px h-4 bg-slate-300 dark:bg-slate-700 mx-1"},null,-1)),e("button",{onClick:C,class:"px-2 py-1 text-xs hover:bg-slate-200 dark:hover:bg-slate-700 rounded"}," 重置 ")])])),a(" 可视化区域 "),e("div",G,[e("div",q,[a(" SVG 连接线 "),(p(),c("svg",J,[t[4]||(t[4]=x('<defs data-v-9be663fe><marker id="agent-arrow-gray" markerWidth="6" markerHeight="6" refX="16" refY="3" orient="auto" data-v-9be663fe><path d="M0,0 L0,6 L6,3 z" fill="currentColor" data-v-9be663fe></path></marker><marker id="agent-arrow-purple" markerWidth="6" markerHeight="6" refX="16" refY="3" orient="auto" data-v-9be663fe><path d="M0,0 L0,6 L6,3 z" fill="#a855f7" data-v-9be663fe></path></marker><marker id="agent-arrow-orange" markerWidth="6" markerHeight="6" refX="16" refY="3" orient="auto" data-v-9be663fe><path d="M0,0 L0,6 L6,3 z" fill="#f97316" data-v-9be663fe></path></marker></defs>',1)),a(" 主流程 "),e("line",{x1:"90",y1:"150",x2:"160",y2:"150","stroke-width":"2",class:r(v("receive","plan")),"marker-end":"url(#agent-arrow-gray)"},null,2),e("line",{x1:"240",y1:"150",x2:"310",y2:"150","stroke-width":"2",class:r(v("plan","execute")),"marker-end":"url(#agent-arrow-gray)"},null,2),e("line",{x1:"390",y1:"150",x2:"460",y2:"150","stroke-width":"2",class:r(v("execute","evaluate")),"marker-end":"url(#agent-arrow-gray)"},null,2),e("line",{x1:"540",y1:"150",x2:"610",y2:"150","stroke-width":"2",class:r(v("evaluate","decision")),"marker-end":"url(#agent-arrow-gray)"},null,2),a(" 循环路径 "),e("path",{d:"M 680 195 L 680 260 L 160 260 L 160 195",fill:"none","stroke-width":"2",class:r(v("decide","reflect",!0)),"marker-end":"url(#agent-arrow-orange)"},null,2),a(" 完成路径 "),e("line",{x1:"680",y1:"150",x2:"760",y2:"150","stroke-width":"2",class:r(v("decide","done")),"marker-end":"url(#agent-arrow-gray)"},null,2)])),a(" Agentic Loop 虚线框 "),t[11]||(t[11]=e("div",{class:"absolute top-[50px] left-[140px] w-[580px] h-[160px] rounded-xl border-2 border-dashed border-purple-200 dark:border-purple-800 bg-purple-50/30 dark:bg-purple-900/10 pointer-events-none"},[e("div",{class:"mt-[-12px] ml-4 bg-white dark:bg-[#0d1117] px-3 py-1 flex items-center gap-2 text-purple-500 text-xs font-bold uppercase tracking-widest"},[e("span",{class:"text-purple-400"},"●"),y(" Agent Loop ")])],-1)),a(" Receive "),e("div",{class:r(["absolute top-[100px] left-[10px] w-[80px] h-[100px]",u("receive")])},[...t[5]||(t[5]=[x('<div class="w-full h-full bg-white dark:bg-[#1c2128] border border-slate-200 dark:border-slate-600 rounded-lg p-2 flex flex-col items-center justify-center gap-1 shadow-xl" data-v-9be663fe><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-slate-500" data-v-9be663fe><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-9be663fe></path></svg><span class="font-bold text-[10px]" data-v-9be663fe>接收任务</span><span class="text-[8px] text-slate-500" data-v-9be663fe>Input</span></div>',1)])],2),a(" Planner "),e("div",{class:r(["absolute top-[100px] left-[160px] w-[80px] h-[100px]",u("planner")])},[...t[6]||(t[6]=[x('<div class="w-full h-full bg-white dark:bg-[#1c2128] border border-slate-200 dark:border-slate-600 rounded-lg p-2 flex flex-col items-center justify-center gap-1 shadow-xl" data-v-9be663fe><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-blue-500" data-v-9be663fe><path d="M3 3h7v7H3zM14 3h7v7h-7zM14 14h7v7h-7zM3 14h7v7H3z" data-v-9be663fe></path></svg><span class="font-bold text-[10px]" data-v-9be663fe>规划分解</span><span class="text-[8px] text-slate-500" data-v-9be663fe>Plan</span></div>',1)])],2),a(" Executor "),e("div",{class:r(["absolute top-[100px] left-[310px] w-[80px] h-[100px]",u("executor")])},[...t[7]||(t[7]=[x('<div class="w-full h-full bg-white dark:bg-[#1c2128] border border-slate-200 dark:border-slate-600 rounded-lg p-2 flex flex-col items-center justify-center gap-1 shadow-xl" data-v-9be663fe><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-green-500" data-v-9be663fe><path d="M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5" data-v-9be663fe></path><polyline points="14 2 14 8 20 8" data-v-9be663fe></polyline></svg><span class="font-bold text-[10px]" data-v-9be663fe>执行工具</span><span class="text-[8px] text-slate-500" data-v-9be663fe>Execute</span></div>',1)])],2),a(" Evaluator "),e("div",{class:r(["absolute top-[100px] left=[460px] left-[460px]",u("evaluator")])},[...t[8]||(t[8]=[x('<div class="w-[80px] h-[100px] bg-white dark:bg-[#1c2128] border border-slate-200 dark:border-slate-600 rounded-lg p-2 flex flex-col items-center justify-center gap-1 shadow-xl" data-v-9be663fe><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-yellow-500" data-v-9be663fe><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z" data-v-9be663fe></path><path d="m9 12 2 2 4-4" data-v-9be663fe></path></svg><span class="font-bold text-[10px]" data-v-9be663fe>评估结果</span><span class="text-[8px] text-slate-500" data-v-9be663fe>Evaluate</span></div>',1)])],2),a(" Decision "),e("div",{class:r(["absolute top-[100px] left-[610px] w-[70px] h-[100px]",u("decision")])},[...t[9]||(t[9]=[x('<div class="w-full h-full bg-white dark:bg-[#1c2128] border border-slate-200 dark:border-slate-600 rounded-lg p-2 flex flex-col items-center justify-center gap-1 shadow-xl" data-v-9be663fe><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-orange-500" data-v-9be663fe><path d="M6 3v12" data-v-9be663fe></path><circle cx="18" cy="6" r="3" data-v-9be663fe></circle><circle cx="6" cy="18" r="3" data-v-9be663fe></circle><path d="M18 9a9 9 0 0 1-9 9" data-v-9be663fe></path></svg><span class="font-bold text-[10px]" data-v-9be663fe>决策</span><span class="text-[8px] text-slate-500" data-v-9be663fe>Branch</span></div>',1)])],2),a(" Done "),e("div",{class:r(["absolute top-[100px] left-[760px] w-[60px] h-[100px]",u("done")])},[...t[10]||(t[10]=[x('<div class="w-full h-full bg-white dark:bg-[#1c2128] border border-slate-200 dark:border-slate-600 rounded-lg p-2 flex flex-col items-center justify-center gap-1 shadow-xl" data-v-9be663fe><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-green-500" data-v-9be663fe><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" data-v-9be663fe></path><polyline points="22 4 12 14.01 9 11.01" data-v-9be663fe></polyline></svg><span class="font-bold text-[10px]" data-v-9be663fe>完成</span><span class="text-[8px] text-slate-500" data-v-9be663fe>Done</span></div>',1)])],2),a(" Success Badge "),i.value.id==="done"?(p(),c("div",K," ✓ 成功 ")):a("v-if",!0),a(" Retry Badge "),i.value.isLoop?(p(),c("div",O," ↻ 反思重试 ")):a("v-if",!0)])]),a(" 底部状态区 "),f.mini?a("v-if",!0):(p(),c("div",Q,[e("h3",U,g(i.value.title),1),e("p",Z,g(i.value.description),1),e("div",ee,[(p(!0),c(A,null,I(i.value.tags,b=>(p(),c("span",{key:b,class:"px-2 py-0.5 bg-slate-200 dark:bg-slate-800 rounded text-[10px] font-mono"},"#"+g(b),1))),128))])]))],2))}},ae=P(te,[["__scopeId","data-v-9be663fe"]]),pe={__name:"01.intro.md__slidev_5",setup(f){const{$clicksContext:d,$frontmatter:l}=_();return d.setup(),(o,s)=>{const i=ae,h=N;return p(),V($,E(D(m(H)(m(l),4))),{default:w(()=>[s[1]||(s[1]=e("h1",null,"Agent Loop 核心机制",-1)),k(i),a(`
AgentLoop 组件展示：
1. 接收任务 - 理解任务目标
2. 规划分解 - 拆分为子任务
3. 执行工具 - 调用工具完成任务
4. 评估结果 - 验证是否达成目标
5. 决策判断 - 成功则完成，失败则反思
6. 反思调整 - 分析错误，调整策略重新规划
`),k(h,null,{default:w(()=>[...s[0]||(s[0]=[e("p",null,[e("strong",null,"核心"),y(": 规划 → 执行 → 评估 → 反思 → 重复")],-1)])]),_:1})]),_:1},16)}}};export{pe as default};
