import{_ as l}from"./chunks/plugin-vue_export-helper.DlAUqK2U.js";import{C as h,c as p,o as i,ad as a,b as k,w as n,a as e,G as E,ae as r}from"./chunks/mermaid.Cb40Nz1P.js";import"./chunks/cytoscape.C2CwDKBM.js";import"./chunks/dayjs.C32PoDnw.js";const b=JSON.parse('{"title":"æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP) å®ç°æŒ‡å—","description":"","frontmatter":{},"headers":[],"relativePath":"zh/integration/protocols/mcp.md","filePath":"zh/integration/protocols/mcp.md"}'),d={name:"zh/integration/protocols/mcp.md"};function o(g,s,y,c,F,u){const t=h("Mermaid");return i(),p("div",null,[s[1]||(s[1]=a('<h1 id="æ¨¡å‹ä¸Šä¸‹æ–‡åè®®-mcp-å®ç°æŒ‡å—" tabindex="-1">æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP) å®ç°æŒ‡å— <a class="header-anchor" href="#æ¨¡å‹ä¸Šä¸‹æ–‡åè®®-mcp-å®ç°æŒ‡å—" aria-label="Permalink to &quot;æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP) å®ç°æŒ‡å—&quot;">â€‹</a></h1><p><strong>æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP)</strong> æ˜¯å°† AI æ¨¡å‹è¿æ¥åˆ°å¤–éƒ¨å·¥å…·å’Œæ•°æ®çš„å¼€æ”¾æ ‡å‡†ã€‚</p><blockquote><p><strong>åŠ¨æ‰‹ç¤ºä¾‹</strong>: æˆ‘ä»¬åœ¨æ­¤ä»“åº“ä¸­æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„å·¥ä½œç¤ºä¾‹ã€‚</p><p>ğŸ“‚ <strong><a href="./../../../examples/mcp-lab/README.html">æŸ¥çœ‹ MCP Lab ç¤ºä¾‹</a></strong></p></blockquote><h2 id="æ ¸å¿ƒå®ç°æ¦‚å¿µ" tabindex="-1">æ ¸å¿ƒå®ç°æ¦‚å¿µ <a class="header-anchor" href="#æ ¸å¿ƒå®ç°æ¦‚å¿µ" aria-label="Permalink to &quot;æ ¸å¿ƒå®ç°æ¦‚å¿µ&quot;">â€‹</a></h2><p>MCP è¿æ¥ä¸¤ç«¯ï¼š</p><ol><li><strong>å®¿ä¸» (Client)</strong>: AI åº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚ Claude Desktop, Cursor æˆ–ä½ çš„è‡ªå®šä¹‰åº”ç”¨ï¼‰ã€‚</li><li><strong>æœåŠ¡å™¨ (Server)</strong>: å·¥å…·å’Œèµ„æºçš„æä¾›è€…ï¼ˆä¾‹å¦‚ä½ çš„ Node.js è„šæœ¬ï¼‰ã€‚</li></ol><h3 id="é€šä¿¡æµç¨‹" tabindex="-1">é€šä¿¡æµç¨‹ <a class="header-anchor" href="#é€šä¿¡æµç¨‹" aria-label="Permalink to &quot;é€šä¿¡æµç¨‹&quot;">â€‹</a></h3>',7)),(i(),k(r,null,{default:n(()=>[E(t,{id:"mermaid-35",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20Client%20as%20MCP%20Client%20(Claude)%0A%20%20%20%20participant%20Server%20as%20MCP%20Server%20(Node.js)%0A%0A%20%20%20%20Client-%3E%3EServer%3A%20%E5%88%9D%E5%A7%8B%E5%8C%96%20(Capabilities)%0A%20%20%20%20Server--%3E%3EClient%3A%20%E8%83%BD%E5%8A%9B%20(Tools%2C%20Resources)%0A%20%20%20%20%0A%20%20%20%20Client-%3E%3EServer%3A%20ListToolsRequest%0A%20%20%20%20Server--%3E%3EClient%3A%20%E5%B7%A5%E5%85%B7%E5%88%97%E8%A1%A8%20(JSON%20Schema)%0A%20%20%20%20%0A%20%20%20%20Note%20over%20Client%3A%20%E7%94%A8%E6%88%B7%E9%97%AE%3A%20%22Add%205%20%2B%203%22%0A%20%20%20%20%0A%20%20%20%20Client-%3E%3EServer%3A%20CallToolRequest%20(%22add%22%2C%20%7Ba%3A%205%2C%20b%3A%203%7D)%0A%20%20%20%20Server--%3E%3EClient%3A%20CallToolResult%20(%228%22)%0A"})]),fallback:n(()=>[...s[0]||(s[0]=[e(" Loading... ",-1)])]),_:1})),s[2]||(s[2]=a(`<h2 id="åˆ†æ­¥å®ç°" tabindex="-1">åˆ†æ­¥å®ç° <a class="header-anchor" href="#åˆ†æ­¥å®ç°" aria-label="Permalink to &quot;åˆ†æ­¥å®ç°&quot;">â€‹</a></h2><p>ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨ <code>@modelcontextprotocol/sdk</code> æ„å»ºç”Ÿäº§çº§ MCP æœåŠ¡å™¨ã€‚</p><h3 id="_1-æœåŠ¡å™¨è®¾ç½®" tabindex="-1">1. æœåŠ¡å™¨è®¾ç½® <a class="header-anchor" href="#_1-æœåŠ¡å™¨è®¾ç½®" aria-label="Permalink to &quot;1. æœåŠ¡å™¨è®¾ç½®&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Server } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@modelcontextprotocol/sdk/server/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { StdioServerTransport } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@modelcontextprotocol/sdk/server/stdio.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  CallToolRequestSchema,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ListToolsRequestSchema,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@modelcontextprotocol/sdk/types.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { z } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;zod&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Initialize Server with name and version</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-mcp-server&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    version: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    capabilities: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      tools: {}, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// We are providing tools</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="_2-å®šä¹‰å·¥å…·" tabindex="-1">2. å®šä¹‰å·¥å…· <a class="header-anchor" href="#_2-å®šä¹‰å·¥å…·" aria-label="Permalink to &quot;2. å®šä¹‰å·¥å…·&quot;">â€‹</a></h3><p>ä½ å¿…é¡»å®šä¹‰ <strong>Schema</strong> (AI çœ‹åˆ°ä»€ä¹ˆ) å’Œ <strong>Handler</strong> (è¿è¡Œä»€ä¹ˆä»£ç )ã€‚</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Define what tools are available</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setRequestHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ListToolsRequestSchema, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tools: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;calculate_sum&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Add two numbers together&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        inputSchema: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;object&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          properties: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            a: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;number&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            b: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;number&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          required: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_3-å¤„ç†å·¥å…·è°ƒç”¨" tabindex="-1">3. å¤„ç†å·¥å…·è°ƒç”¨ <a class="header-anchor" href="#_3-å¤„ç†å·¥å…·è°ƒç”¨" aria-label="Permalink to &quot;3. å¤„ç†å·¥å…·è°ƒç”¨&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Execute the logic when AI calls the tool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setRequestHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CallToolRequestSchema, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request.params;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;calculate_sum&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Validate inputs with Zod</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> z.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ a: z.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), b: z.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> schema.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      content: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          text: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`The sum is \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Unknown tool: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_4-è¿æ¥ä¼ è¾“" tabindex="-1">4. è¿æ¥ä¼ è¾“ <a class="header-anchor" href="#_4-è¿æ¥ä¼ è¾“" aria-label="Permalink to &quot;4. è¿æ¥ä¼ è¾“&quot;">â€‹</a></h3><p>MCP é€šå¸¸é€šè¿‡ Stdioï¼ˆæ ‡å‡†è¾“å…¥/è¾“å‡ºï¼‰ç”¨äºæœ¬åœ°åº”ç”¨ï¼Œæˆ– SSEï¼ˆæœåŠ¡å™¨å‘é€äº‹ä»¶ï¼‰ç”¨äºè¿œç¨‹åº”ç”¨ã€‚</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> transport</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StdioServerTransport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(transport);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MCP Server running on Stdio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h2 id="å®¢æˆ·ç«¯é›†æˆæ¨¡å¼" tabindex="-1">å®¢æˆ·ç«¯é›†æˆæ¨¡å¼ <a class="header-anchor" href="#å®¢æˆ·ç«¯é›†æˆæ¨¡å¼" aria-label="Permalink to &quot;å®¢æˆ·ç«¯é›†æˆæ¨¡å¼&quot;">â€‹</a></h2><p>ä½ å¦‚ä½•ä½¿ç”¨æ­¤æœåŠ¡å™¨ï¼Ÿ</p><h3 id="é€‰é¡¹-a-claude-desktop-æœ€ç®€å•" tabindex="-1">é€‰é¡¹ A: Claude Desktop (æœ€ç®€å•) <a class="header-anchor" href="#é€‰é¡¹-a-claude-desktop-æœ€ç®€å•" aria-label="Permalink to &quot;é€‰é¡¹ A: Claude Desktop (æœ€ç®€å•)&quot;">â€‹</a></h3><p>å°†æ­¤æ·»åŠ åˆ°ä½ çš„ <code>claude_desktop_config.json</code>ï¼š</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;my-lab-server&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/absolute/path/to/learn-ai/examples/mcp-lab/src/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="é€‰é¡¹-b-è‡ªå®šä¹‰å®¢æˆ·ç«¯-é«˜çº§" tabindex="-1">é€‰é¡¹ B: è‡ªå®šä¹‰å®¢æˆ·ç«¯ (é«˜çº§) <a class="header-anchor" href="#é€‰é¡¹-b-è‡ªå®šä¹‰å®¢æˆ·ç«¯-é«˜çº§" aria-label="Permalink to &quot;é€‰é¡¹ B: è‡ªå®šä¹‰å®¢æˆ·ç«¯ (é«˜çº§)&quot;">â€‹</a></h3><p>å¦‚æœä½ æ­£åœ¨æ„å»ºè‡ªå·±çš„ AI åº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚ä½¿ç”¨ LangChainï¼‰ï¼Œä½ å¯ä»¥å……å½“ MCP å®¢æˆ·ç«¯ã€‚</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Client } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@modelcontextprotocol/sdk/client/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { StdioClientTransport } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@modelcontextprotocol/sdk/client/stdio.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> transport</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StdioClientTransport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  command: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  args: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./my-server.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> client</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Client</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, version: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, { capabilities: {} });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(transport);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// List available tools</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">tools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listTools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Call a tool</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">callTool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;calculate_sum&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  arguments: { a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="å®‰å…¨æœ€ä½³å®è·µ" tabindex="-1">å®‰å…¨æœ€ä½³å®è·µ <a class="header-anchor" href="#å®‰å…¨æœ€ä½³å®è·µ" aria-label="Permalink to &quot;å®‰å…¨æœ€ä½³å®è·µ&quot;">â€‹</a></h2><ol><li><strong>è¾“å…¥éªŒè¯</strong>: å§‹ç»ˆä½¿ç”¨ Zod éªŒè¯å‚æ•°ã€‚AI å¯èƒ½ä¼šäº§ç”Ÿç±»å‹çš„å¹»è§‰ã€‚</li><li><strong>è·¯å¾„éå†</strong>: å¦‚æœåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿå·¥å…·ï¼Œç¡®ä¿ç”¨æˆ·æ— æ³•è®¿é—® <code>../../etc/passwd</code>ã€‚</li><li><strong>åªè¯»é»˜è®¤å€¼</strong>: åœ¨å…è®¸å†™å…¥/åˆ é™¤æ“ä½œä¹‹å‰ï¼Œå…ˆä»åªè¯»å·¥å…·å¼€å§‹ã€‚</li></ol><h2 id="ä¸‹ä¸€æ­¥" tabindex="-1">ä¸‹ä¸€æ­¥ <a class="header-anchor" href="#ä¸‹ä¸€æ­¥" aria-label="Permalink to &quot;ä¸‹ä¸€æ­¥&quot;">â€‹</a></h2><ul><li><strong><a href="./tool-calling.html">å·¥å…·è°ƒç”¨æŒ‡å—</a></strong>: æ·±å…¥äº†è§£å‡½æ•°è°ƒç”¨æ¨¡å¼ã€‚</li><li><strong><a href="./../../../examples/mcp-lab/">MCP Lab ç¤ºä¾‹</a></strong>: åœ¨æœ¬åœ°è¿è¡Œå®Œæ•´ä»£ç ã€‚</li></ul>`,24))])}const B=l(d,[["render",o]]);export{b as __pageData,B as default};
